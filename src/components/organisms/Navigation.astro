---
import { Icon } from 'astro-icon'
import i18next, { t } from "i18next";
import { localizePath } from "astro-i18next";
import ThemeSelector from 'molecules/ThemeSelector.vue'
import ISO6991 from "iso-639-1";

const supportedLanguages = i18next.languages;
const currentLanguage = i18next.language;

const { pathname } = Astro.url;

---
<style is:inline>
  .sun { display: none; }
  .moon { display: block; }

  :global(.dark) .sun { display: block; }
  :global(.dark) .moon { display: none; }

</style>


<nav class="flex justify-center items-center">
  <select class="select select-xs mx-2" onchange="location = this.value">
    {
      supportedLanguages.map((supportedLanguage: string) => {
        const value = localizePath(pathname, supportedLanguage);
        const nativeName = ISO6991.getNativeName(supportedLanguage);

        return (
        <option selected={supportedLanguage === currentLanguage} value={value}>{ nativeName }</option>

        )
      }
    )}
  </select>

  <div>
    <ThemeSelector client:only="vue">
      <Icon class="sun" width="22" name="sun"/>
      <Icon class="moon" width="22" name="moon" />
    </ThemeSelector>
  </div>
</nav>



